angular.module("toastr",[]).directive("toast",["$compile","$interval","toastr",function(t,e,s){return{replace:!0,templateUrl:"templates/toastr/toastr.html",link:function(o,n){function i(t){return e(function(){s.remove(o.toastId)},t,1)}var a;if(o.toastClass=o.options.toastClass,o.titleClass=o.options.titleClass,o.messageClass=o.options.messageClass,o.options.closeHtml){var r=angular.element(o.options.closeHtml);r.addClass("toast-close-button"),r.attr("ng-click","close()"),t(r)(o),n.prepend(r)}o.init=function(){o.options.timeOut&&(a=i(o.options.timeOut))},n.on("mouseenter",function(){a&&e.cancel(a)}),o.tapToast=function(){o.options.tapToDismiss&&o.close()},o.close=function(){s.remove(o.toastId)},n.on("mouseleave",function(){(0!==o.options.timeOut||0!==o.options.extendedTimeOut)&&(a=i(o.options.extendedTimeOut))})}}}]).constant("toastrConfig",{allowHtml:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",newestOnTop:!0,positionClass:"toast-top-right",tapToDismiss:!0,timeOut:5e3,titleClass:"toast-title",toastClass:"toast"}).factory("toastr",["$animate","$compile","$document","$rootScope","$sce","toastrConfig","$q",function(t,e,s,o,n,i,a){function r(t){if(t)v(t.toastId);else for(var e=0;e<h.length;e++)v(h[e].toastId)}function l(t,e,s){var o=d().iconClasses.error;return p(o,t,e,s)}function c(t,e,s){var o=d().iconClasses.info;return p(o,t,e,s)}function u(t,e,s){var o=d().iconClasses.success;return p(o,t,e,s)}function m(t,e,s){var o=d().iconClasses.warning;return p(o,t,e,s)}function p(t,e,s,o){return"object"==typeof s&&(o=s,s=null),C({iconClass:t,message:e,optionsOverride:o,title:s})}function d(){return angular.extend({},i)}function f(e){if(g)return T.promise;g=angular.element("<div></div>"),g.attr("id",e.containerId),g.addClass(e.positionClass),g.css({"pointer-events":"auto"});var o=s.find("body").eq(0);return t.enter(g,o).then(function(){T.resolve()}),T.promise}function C(s){function i(t,e,s){s.allowHtml?(t.scope.allowHtml=!0,t.scope.title=n.trustAsHtml(e.title),t.scope.message=n.trustAsHtml(e.message)):(t.scope.title=e.title,t.scope.message=e.message),t.scope.toastType=t.iconClass,t.scope.toastId=t.toastId,t.scope.options={extendedTimeOut:s.extendedTimeOut,messageClass:s.messageClass,tapToDismiss:s.tapToDismiss,timeOut:s.timeOut,titleClass:s.titleClass,toastClass:s.toastClass},s.closeButton&&(t.scope.options.closeHtml=s.closeHtml)}function a(t){var s=angular.element("<div toast></div>");return e(s)(t)}var r=d(),l={toastId:O++,scope:o.$new()};return l.iconClass=s.iconClass,s.optionsOverride&&(r=angular.extend(r,s.optionsOverride),l.iconClass=s.optionsOverride.iconClass||l.iconClass),i(l,s,r),l.el=a(l.scope),h.push(l),f(r).then(function(){r.newestOnTop?t.enter(l.el,g).then(function(){l.scope.init()}):t.enter(l.el,g,g[0].lastChild).then(function(){l.scope.init()})}),l}function v(e){function s(t){for(var e=0;e<h.length;e++)if(h[e].toastId===t)return h[e]}var o=s(e);o&&t.leave(o.el).then(function(){o.scope.$destroy(),g&&0===g.children().length&&(h=[],g.remove(),g=null,T=a.defer())})}var g,O=0,h=[],T=a.defer(),w={clear:r,error:l,info:c,remove:v,success:u,warning:m};return w}]);